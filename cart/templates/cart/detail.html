{% extends "shop/base.html" %}
{% load static %}
{% block title %}
    Корзина | ARMATURA.MOSCOW арматура в Одинцово
{% endblock %}
{% block content %}

    <div class="col-lg-9 mx-auto">
        {% if cart %}
    <h1 class="mb-4">Ваша корзина</h1>
        <div class="cart card card-body shadow border-0">
            <div class="row card-header mb-2 fs-6 fw-bold py-3">
                <div class="col-3">Наименование</div>
                <div class="col text-center">Количество, м.</div>
                <div class="col text-center">Цена за метр, руб.</div>
                <div class="col text-center">Сумма, руб.</div>
                <div class="col text-center">Удалить</div>
            </div>
            {% for item in cart %}
                {% with product=item.product %}
                    <div class="row card-body border-bottom ">
                        <div class="col-3 fw-bolder" ><a class="text-decoration-none" href="{% url 'shop:product' product.slug %}">{{ product.name }}</a></div>
                        <div class="col text-center">{{ item.quantity }}</div>
                        <div class="col text-center">{{ item.price }}</div>
                        <div class="col text-center">{{ item.total_price }}</div>
                        <div class="col text-center fs-3"><a href="{% url "cart:cart_remove" product.id %}"><i class="bi bi-cart-x"></i></a>
                        </div>
                    </div>
                {% endwith %}
            {% endfor %}
            <div class="row card-footer">
                <div class="col-5 text-end">Итого:</div>
                <div class="col-5">{{ cart.get_total_price }} руб.</div>
            </div>

        </div>
        <div class="row mt-4">
            <p class="">
                <a href="{% url "shop:home" %}" class="btn btn-primary">Продолжить покупки</a>
                <a href="{% url "orders:order_create" %}" class="btn btn-success">Оформить заказ</a>
            </p>
        </div>
    {% else %}
            <h2 class="m5-4 ">Ваша корзина пуста &#128549;</h2>
            <div class="alert alert-warning pb-1" role="alert" style="width: fit-content;">
                <p>В вашей корзине больше нет товаров, для добавления товара перейдите в магазин</p>
            </div>
            <div class="row mt-4">
            <p class="">
                <a href="{% url "shop:home" %}" class="btn btn-primary">Перейти в магазин</a>
            </p>
        </div>
    {% endif %}
    </div>
{% endblock %}